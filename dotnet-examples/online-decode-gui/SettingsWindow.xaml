<Window x:Class="SherpaOnnxASR.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Sherpa Onnx Settings" Height="480" Width="550"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize" Background="#252526">
    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="#CCC"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,10,0"/>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="#333"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="2"/>
            <Setter Property="Height" Value="24"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="Background" Value="#444"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Margin" Value="5,0,0,0"/>
        </Style>
    </Window.Resources>
    
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>  <!-- Row 0: Encoder -->
            <RowDefinition Height="Auto"/>  <!-- Row 1: Decoder -->
            <RowDefinition Height="Auto"/>  <!-- Row 2: Joiner -->
            <RowDefinition Height="Auto"/>  <!-- Row 3: Tokens -->
            <RowDefinition Height="15"/>    <!-- Row 4: Separator -->
            <RowDefinition Height="Auto"/>  <!-- Row 5: Sample Wav -->
            <RowDefinition Height="Auto"/>  <!-- Row 6: Mic Gain -->
            <RowDefinition Height="15"/>    <!-- Row 7: Separator 2 -->
            <RowDefinition Height="Auto"/>  <!-- Row 8: Model Actions -->
            <RowDefinition Height="15"/>    <!-- Row 9: Separator 3 (New) -->
            <RowDefinition Height="Auto"/>  <!-- Row 10: Results Label -->
            <RowDefinition Height="*"/>     <!-- Row 11: Results TextBox -->
            <RowDefinition Height="Auto"/>  <!-- Row 12: Close Button -->
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="30"/>
        </Grid.ColumnDefinitions>

        <!-- Encoder -->
        <TextBlock Grid.Row="0" Grid.Column="0" Text="Encoder:"/>
        <TextBox Grid.Row="0" Grid.Column="1" x:Name="EncoderBox" Margin="0,5"/>
        <Button Grid.Row="0" Grid.Column="2" Content="..." Click="BrowseEncoder_Click" Margin="5,5,0,5"/>

        <!-- Decoder -->
        <TextBlock Grid.Row="1" Grid.Column="0" Text="Decoder:"/>
        <TextBox Grid.Row="1" Grid.Column="1" x:Name="DecoderBox" Margin="0,5"/>
        <Button Grid.Row="1" Grid.Column="2" Content="..." Click="BrowseDecoder_Click" Margin="5,5,0,5"/>

        <!-- Joiner -->
        <TextBlock Grid.Row="2" Grid.Column="0" Text="Joiner:"/>
        <TextBox Grid.Row="2" Grid.Column="1" x:Name="JoinerBox" Margin="0,5"/>
        <Button Grid.Row="2" Grid.Column="2" Content="..." Click="BrowseJoiner_Click" Margin="5,5,0,5"/>

        <!-- Tokens -->
        <TextBlock Grid.Row="3" Grid.Column="0" Text="Tokens:"/>
        <TextBox Grid.Row="3" Grid.Column="1" x:Name="TokensBox" Margin="0,5"/>
        <Button Grid.Row="3" Grid.Column="2" Content="..." Click="BrowseTokens_Click" Margin="5,5,0,5"/>

        <!-- Separator -->
        <Border Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="3" BorderBrush="#555" BorderThickness="0,0,0,1"/>

        <!-- Sample Wav Path -->
        <TextBlock Grid.Row="5" Grid.Column="0" Text="Sample Wav:"/>
        <TextBox Grid.Row="5" Grid.Column="1" x:Name="SampleWavBox" Margin="0,5" ToolTip="Folder containing sample .wav files"/>
        <Button Grid.Row="5" Grid.Column="2" Content="..." Click="BrowseSampleWav_Click" Margin="5,5,0,5"/>

        <!-- Mic Gain -->
        <TextBlock Grid.Row="6" Grid.Column="0" Text="Mic Gain:"/>
        <StackPanel Grid.Row="6" Grid.Column="1" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,5">
            <TextBox x:Name="MicGainBox" Width="60" Margin="0" ToolTip="Microphone signal amplification factor (1.0 = no change)"/>
            <TextBlock Text="x" Foreground="#888" Margin="5,0,0,0"/>
        </StackPanel>

        <!-- Separator 2 -->
        <Border Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="3" BorderBrush="#555" BorderThickness="0,0,0,1"/>

        <!-- Model Actions -->
        <TextBlock Grid.Row="8" Grid.Column="0" Text="Model:" FontWeight="Bold"/>
        <StackPanel Grid.Row="8" Grid.Column="1" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,5">
            <Button x:Name="LoadModelBtn" Content="ðŸ“¦ Load Model" Click="LoadModel_Click" Padding="10,3" Background="#007ACC"/>
            <Button x:Name="DecodeSampleBtn" Content="ðŸŽµ Decode Sample" Click="DecodeSample_Click" Padding="10,3" IsEnabled="False" Margin="10,0,0,0"/>
            <CheckBox x:Name="DebugSaveCheck" Content="ðŸ”§ Save WAV" Foreground="#AAA" VerticalAlignment="Center" Margin="15,0,0,0" 
                      ToolTip="Save audio to sherpa-onnx.wav for debugging" Checked="DebugSave_Changed" Unchecked="DebugSave_Changed"/>
        </StackPanel>

        <!-- Separator 3 (between Model and Results) -->
        <Border Grid.Row="9" Grid.Column="0" Grid.ColumnSpan="3" BorderBrush="#555" BorderThickness="0,0,0,1"/>

        <!-- Results Text Area -->
        <TextBlock Grid.Row="10" Grid.Column="0" Text="Results:" Margin="0,10,0,0"/>
        <TextBox Grid.Row="11" Grid.Column="0" Grid.ColumnSpan="3" 
                 x:Name="ResultsBox" 
                 Height="120" 
                 Margin="0,5"
                 TextWrapping="Wrap" 
                 AcceptsReturn="True" 
                 VerticalScrollBarVisibility="Auto"
                 IsReadOnly="True"
                 Background="#1E1E1E"
                 Foreground="#DDD"
                 FontFamily="Consolas"
                 FontSize="11"/>
        
        <!-- Close Button -->
        <Button Grid.Row="12" Grid.Column="1" Content="Close" Height="30" Background="#555" Click="Close_Click" Margin="0,10,0,0"/>
    </Grid>
</Window>